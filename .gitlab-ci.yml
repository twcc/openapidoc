stages:        
  - sync
 

sync_to_github:
  image: node:18-alpine3.16
  stage: sync
  script:
    - git clone https://github.com/twcc/openapidoc.git
    - git remote add origin https://${LEO_USERNAME}:${Leo_ACCESS_TOKEN}@github.com/twcc/openapidoc.git
    - cd openapidoc
    - git config user.email "leo.chen@twsc.io"
    - git config user.name "Leo"
    - git pull origin main --ff-only
    - cp -R ../. .
    - git add -A
    - git commit -m "Sync changes from GitLab CI/CD job $CI_JOB_ID"
    - git push origin main
